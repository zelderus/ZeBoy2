C51 COMPILER V9.55   MAIN                                                                  04/08/2016 10:56:52 PAGE 1   


C51 COMPILER V9.55, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: d:\Keil_v5\C51\BIN\C51.EXE main.c LARGE OPTIMIZE(8,SPEED) PRINT(.\Listings\main.lst) TABS(2) OBJECT
                    -(.\Objects\main.obj)

line level    source

   1          #include <REG2051.H>
   2          #include <common.h>
   3          #include <lcd.h>
   4          
   5          
   6          
   7          // для отладки в Proteus
   8          #define DBG_PROTEUS
   9          
  10          
  11          
  12          void InitVideoBuff(void);
  13          void Loop(void);
  14          void VideoClear(void);
  15          void Update(void);
  16          void VideoDraw(void);
  17          
  18          
  19          /***
  20          *
  21          * Точка входа
  22          * инициализация и запуск основного цикла
  23          *
  24          ***/
  25          void main(void) {
  26   1        
  27   1        //
  28   1        BOOL fromProt = FALSE;
  29   1        #ifdef DBG_PROTEUS
  30   1        fromProt = TRUE;
  31   1        #endif
  32   1        
  33   1        
  34   1        // init
  35   1        LCDinit(fromProt);
  36   1        LCDclear();
  37   1        InitVideoBuff();
  38   1        
  39   1        while(1){
  40   2          Loop();
  41   2        }
  42   1      }
  43          
  44          
  45          BYTE _video[4][122]= {
  46            { 0xFF,0x01,0x01,0x01,0x01,0xC1,0xE1,0xB1,0x11,0x1D,0x1D,0x7F,0x7F,0xFF,0xFF,0xFF,
  47              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFD,0xFD,0xF9,0xB1,
  48              0xF1,0xE1,0x81,0x01,0x01,0x01,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,
  49              0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,
  50              0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,
  51              0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,
  52              0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,
  53              0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xC1,0xFF
  54            },
C51 COMPILER V9.55   MAIN                                                                  04/08/2016 10:56:52 PAGE 2   

  55            { 0xFF,0xE0,0x7C,0x7F,0x7F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF8,0x6F,0x6F,0x07,
  56              0x07,0x06,0x00,0x00,0x03,0x03,0x0F,0x3F,0x07,0x07,0x07,0x03,0x03,0x07,0x0F,0x3B,
  57              0x13,0x80,0x80,0x23,0x9E,0xF8,0xF8,0xF8,0xFC,0xFE,0xFE,0xFE,0xFC,0x00,0x00,0x00,
  58              0x80,0x80,0xE0,0xF8,0xFC,0xFE,0xFE,0xFE,0xFC,0x00,0x00,0x00,0x60,0xF0,0xF8,0xF8,
  59              0x7C,0x3E,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x3E,0x3E,0x7E,0xFC,0xF8,0xF0,0xE0,
  60              0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,0xF8,0xFC,0xFE,
  61              0xFE,0xFE,0xFE,0xFC,0x00,0x1C,0x3E,0x3E,0x3E,0x3E,0x3E,0x3E,0x3E,0xFE,0xFE,0xFE,
  62              0xFE,0xFE,0x3E,0x3E,0x3E,0x3E,0x3E,0x3E,0x1C,0xFF
  63            },
  64            { 0xFF,0x07,0x7C,0xE0,0x80,0x00,0x1F,0x3F,0xFF,0xFF,0xFF,0xFF,0x0F,0x30,0x38,0x00,
  65              0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,
  66              0xE0,0xF0,0xFC,0xFF,0xFF,0x3F,0x0F,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xF8,0xFE,0xFF,
  67              0x7F,0x7F,0x1F,0x0F,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  68              0x00,0x18,0x3C,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x3C,0x3C,0x18,0x00,0x00,0x01,0xFF,
  69              0xFF,0xFF,0xFF,0x00,0x00,0x80,0xE0,0xF0,0xFC,0xFE,0xFF,0x7F,0x1F,0x07,0xFF,0xFF,
  70              0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,
  71              0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF
  72            },
  73            {
  74              0xFF,0x80,0x80,0x80,0x80,0x83,0x86,0x8C,0x98,0xB0,0xB0,0xE0,0xC0,0xC0,0x80,0x80,
  75              0x80,0x80,0x80,0x80,0x80,0x80,0xC0,0xC0,0xC0,0xC0,0xC0,0xE0,0xF8,0xFC,0xFF,0xFF,
  76              0xBF,0x8F,0x87,0x81,0x80,0x80,0x80,0x80,0xFF,0xFF,0xFF,0xFF,0xFF,0x9F,0x83,0x80,
  77              0x80,0x80,0x80,0x80,0xFF,0xFF,0xFF,0xFF,0xFF,0x80,0x80,0x80,0x86,0x8F,0x9F,0xBF,
  78              0xFE,0xFC,0xF8,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF8,0xF8,0xFC,0xFE,0xBF,0x9F,0x8F,
  79              0x87,0xE3,0xF9,0xFC,0xFF,0xFF,0xBF,0x9F,0x87,0x81,0x80,0x80,0x80,0x80,0xFF,0xFF,
  80              0xFF,0xFF,0xFF,0xFF,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xFF,0xFF,0xFF,
  81              0xFF,0xFF,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xFF
  82            }
  83            };
  84          void InitVideoBuff(void){
  85   1      
  86   1      }
  87          
  88          
  89          
  90          /*
  91          *   Основной цикл
  92          */
  93          void Loop(void) {
  94   1        VideoClear();
  95   1        Update();
  96   1        VideoDraw();
  97   1      }
  98          
  99          
 100          
 101          void VideoClear(void){
 102   1        int p = 0;
 103   1        int c = 0;
 104   1        for(p=0; p<4; p++) {
 105   2          for(c=0; c<122; c++) {
 106   3            _video[p][c] = 0;
 107   3          }
 108   2        }
 109   1      }
 110          
 111          
 112          
 113          void Update(void){
 114   1        
 115   1        _video[0][2] = 0xFF;
 116   1        _video[0][3] = 0xFF;
C51 COMPILER V9.55   MAIN                                                                  04/08/2016 10:56:52 PAGE 3   

 117   1        _video[0][4] = 0xFF;
 118   1        _video[0][5] = 0xAA;
 119   1        _video[0][6] = 0x55;
 120   1        _video[0][7] = 0xAA;
 121   1        _video[0][8] = 0x55;
 122   1        _video[0][9] = 0xFF;
 123   1        _video[0][10] = 0xFF;
 124   1        _video[0][11] = 0xFF;
 125   1        
 126   1        _video[2][57] = 0x81;
 127   1        _video[2][58] = 0x81;
 128   1        _video[2][59] = 0x81;
 129   1        _video[2][60] = 0xFF;
 130   1        _video[2][61] = 0xFF;
 131   1        _video[2][62] = 0xFF;
 132   1      }
 133          
 134          
 135          
 136          
 137          
 138          void VideoDraw(void) {
 139   1      
 140   1        
 141   1        LCDdrawLeftOnly(_video);
 142   1        
 143   1      
 144   1      
 145   1        
 146   1        
 147   1      }
 148          
 149          
 150          
 151          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    150    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =    488    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
